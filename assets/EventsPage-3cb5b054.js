import{i as E,k as C,l as B,r as i,j as s,B as j,f as I,R,m as M,g as F,n as A,u as D}from"./index-dd4e00ee.js";import{C as G,M as _,p as L}from"./prettyDate-2fbc2eaf.js";import{f as O,l as V}from"./isYesterday-316f7ecb.js";function w({animation:e,bg:t,bsPrefix:n,size:o,...r}){n=E(n,"placeholder");const[{className:l,...a}]=C(r);return{...a,className:B(l,e?`${n}-${e}`:n,o&&`${n}-${o}`,t&&`bg-${t}`)}}const f=i.forwardRef((e,t)=>{const n=w(e);return s.jsx(j,{...n,ref:t,disabled:!0,tabIndex:-1})});f.displayName="PlaceholderButton";const v=f,y=i.forwardRef(({as:e="span",...t},n)=>{const o=w(t);return s.jsx(e,{...o,ref:n})});y.displayName="Placeholder";const c=Object.assign(y,{Button:v}),p=({data:e})=>s.jsxs("div",{className:"shadow-sm border rounded overflow-hidden",children:[e?s.jsx("div",{style:{backgroundImage:`url(${e.largeimageurl})`,backgroundPosition:"center",backgroundSize:"cover",width:"100%",paddingTop:"80%"}}):s.jsx("div",{style:{backgroundColor:"gainsboro",width:"100%",paddingTop:"80%"}}),s.jsxs("div",{className:"d-flex flex-column p-3",style:{height:240},children:[s.jsx("h2",{className:"h5 mb-2 text-dark",children:(e==null?void 0:e.eventname)??s.jsx(c,{as:"span",animation:"glow",children:s.jsx(c,{xs:12})})}),s.jsxs("div",{className:"small text-muted mb-auto",children:[s.jsxs("div",{className:"mb-1",children:[s.jsx(G,{height:12})," ",(e==null?void 0:e.startdate)??s.jsx(c,{as:"span",animation:"glow",children:s.jsx(c,{xs:6})})]}),s.jsxs("div",{children:[s.jsx(_,{height:12})," ",e!=null&&e.venue?s.jsxs(s.Fragment,{children:[e.venue.name,", ",e.venue.town]}):s.jsx(c,{as:"span",animation:"glow",children:s.jsx(c,{xs:8})})]})]}),e?s.jsx(j,{variant:"outline-primary",children:"View Event"}):s.jsx(v,{variant:"outline-primary",animation:"glow",children:"View Event"})]})]}),g=({children:e})=>s.jsx(F,{md:6,lg:4,xl:3,className:"mb-3",children:e}),q=({results:e,isLoading:t,pagecount:n=8,keyword:o})=>s.jsx(I,{className:"px-0",children:s.jsxs(R,{children:[e==null?void 0:e.map(r=>s.jsx(g,{children:s.jsx(M,{to:`/event/${r.id}`,state:{keyword:o},className:"text-decoration-none",children:s.jsx(p,{data:r})})},r._id)),t&&s.jsx(s.Fragment,{children:Array(n).fill(null).map((r,l)=>s.jsx(g,{children:s.jsx(p,{})},l))})]})}),T={Grid:q},z=({variant:e="Grid",keyword:t,totalcount:n,pagecount:o,results:r,isFullLoading:l,isLoading:a,showMoreButton:h,onShowMore:x})=>{const d=T[e];return l&&a?s.jsx(d,{isLoading:a,pagecount:o}):s.jsxs(s.Fragment,{children:[n>0?s.jsx(d,{results:r,keyword:t,isLoading:a,pagecount:o}):s.jsx("p",{children:"Please try another search."}),a?s.jsx(A,{}):h&&n>0&&s.jsx(j,{variant:"outline-secondary",size:"lg",onClick:x,className:"w-100 my-3",children:"Show more"})]})},U=(e,t)=>{const n=V.findLastIndex(t.results,({id:o})=>e.id===o);return n>-1?`${e.id}_${n}`:e.id},H=(e,t)=>({...e,_id:U(e,t),startdate:L(e.startdate)}),J=async(e,t,n)=>{const o=await O(e,{offset:t}),r=o.results.map(l=>H(l,n));return{...o,results:[...n.results,...r]}},m={pagecount:20,totalcount:0,results:[]},X=()=>{const[e,t]=i.useState(0),[n,o]=i.useState(m),[r,l]=i.useState(!0),{keyword:a}=D(),h=async(u,S,$)=>{l(!0);const k=await J(u,S,$);o(k),l(!1)};i.useEffect(()=>{l(!0),t(0),o(m),h(a,0,m)},[a]);const{pagecount:x,totalcount:d,results:N,showMore:b}=n,P=()=>{const u=e+x;t(u),h(a,u,n)};return s.jsxs(s.Fragment,{children:[r?s.jsx("small",{className:"text-muted",children:"Searching..."}):s.jsxs("b",{className:"text-muted small",children:[d," events"]}),s.jsx("h1",{children:a}),s.jsx("hr",{}),s.jsx(z,{keyword:a,totalcount:d,pagecount:x,results:N,isFullLoading:m===n,isLoading:r,showMoreButton:b,onShowMore:P})]})};export{X as default};
